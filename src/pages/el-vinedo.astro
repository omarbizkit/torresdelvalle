---
import Layout from '../layouts/Layout.astro';

const terroirCards = [
  {
    title: 'Suelo',
    titleEn: 'Soil',
    description: 'Suelos aluviales con alto contenido de caliza, perfectos para la viticultura de calidad.',
    descriptionEn: 'Alluvial soils with high limestone content, perfect for quality viticulture.',
    icon: 'ü™®'
  },
  {
    title: 'Clima',
    titleEn: 'Climate',
    description: 'Influencia mar√≠tima con brumas matutinas que regulan la temperatura y preservan la acidez.',
    descriptionEn: 'Maritime influence with morning fogs that regulate temperature and preserve acidity.',
    icon: 'üåä'
  },
  {
    title: 'Altitud',
    titleEn: 'Altitude',
    description: '300 metros sobre el nivel del mar, proporcionando drenaje natural y exposici√≥n solar √≥ptima.',
    descriptionEn: '300 meters above sea level, providing natural drainage and optimal sun exposure.',
    icon: 'üèîÔ∏è'
  },
  {
    title: 'Variedades',
    titleEn: 'Varietals',
    description: 'Nebbiolo, Grenache, Chenin Blanc y otras variedades mediterr√°neas adaptadas a nuestro terru√±o.',
    descriptionEn: 'Nebbiolo, Grenache, Chenin Blanc and other Mediterranean varieties adapted to our terroir.',
    icon: 'üçá'
  },
  {
    title: 'Agua',
    titleEn: 'Water',
    description: 'Agricultura seca que respeta los recursos h√≠dricos y concentra los sabores en la uva.',
    descriptionEn: 'Dry farming that respects water resources and concentrates flavors in the grape.',
    icon: 'üíß'
  },
  {
    title: 'Biodiversidad',
    titleEn: 'Biodiversity',
    description: 'Cultivos de cobertura y pr√°cticas regenerativas que promueven la salud del ecosistema.',
    descriptionEn: 'Cover crops and regenerative practices that promote ecosystem health.',
    icon: 'üå±'
  }
];

const practices = [
  {
    title: 'Agricultura Regenerativa',
    titleEn: 'Regenerative Agriculture',
    description: 'Implementamos pr√°cticas que mejoran la salud del suelo y la biodiversidad. Nuestros cultivos de cobertura incluyen leguminosas y cereales que aportan nutrientes y estructura al suelo.',
    descriptionEn: 'We implement practices that improve soil health and biodiversity. Our cover crops include legumes and cereals that add nutrients and structure to the soil.'
  },
  {
    title: 'Levaduras Nativas',
    titleEn: 'Native Yeasts',
    description: 'Fermentamos con levaduras ind√≠genas del vi√±edo, permitiendo que cada vino exprese aut√©nticamente el car√°cter de su terru√±o de origen.',
    descriptionEn: 'We ferment with native yeasts from the vineyard, allowing each wine to authentically express the character of its terroir of origin.'
  },
  {
    title: 'Cosecha Manual',
    titleEn: 'Manual Harvest',
    description: 'Seleccionamos cada racimo a mano en el momento √≥ptimo de madurez. Esta atenci√≥n al detalle garantiza la m√°xima calidad de nuestras uvas.',
    descriptionEn: 'We select each cluster by hand at the optimal moment of ripeness. This attention to detail guarantees the maximum quality of our grapes.'
  },
  {
    title: 'Intervenci√≥n M√≠nima',
    titleEn: 'Minimal Intervention',
    description: 'En√≥logo como facilitador, no como manipulador. Permitimos que el terru√±o hable a trav√©s de cada vino con la m√≠nima intervenci√≥n posible.',
    descriptionEn: 'Winemaker as facilitator, not manipulator. We allow the terroir to speak through each wine with the minimum possible intervention.'
  },
  {
    title: 'En Proceso de Certificaci√≥n',
    titleEn: 'In Certification Process',
    description: 'Estamos en proceso de certificaci√≥n org√°nica, trabajando hacia pr√°cticas cada vez m√°s sostenibles y respetuosas con el medio ambiente.',
    descriptionEn: 'We are in the process of organic certification, working towards increasingly sustainable and environmentally respectful practices.'
  }
];

const galleryImages = [
  '/images/vineyard-gallery/golden-hour-landscape.jpg',
  '/images/vineyard-gallery/soil-limestone.jpg',
  '/images/vineyard-gallery/hands-harvest.jpg',
  '/images/vineyard-gallery/barrel-room.jpg',
  '/images/vineyard-gallery/coastal-fog.jpg',
  '/images/vineyard-gallery/cover-crops.jpg',
  '/images/vineyard-gallery/valley-panorama.jpg',
  '/images/vineyard-gallery/tasting-room.jpg',
  '/images/vineyard-gallery/grape-cluster.jpg'
];
---

<Layout 
  title="El Vi√±edo" 
  description="Descubre el terru√±o √∫nico de Torres del Valle en Valle de Guadalupe. Conoce nuestras pr√°cticas sostenibles y el car√°cter que da vida a nuestros vinos."
  locale="es"
  headerTheme="dark"
>
  <!-- Hero Section -->
  <section class="py-20 bg-warm-sand/20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center reveal">
        <h1 class="text-5xl md:text-6xl font-display font-light text-charcoal mb-6">
          Nuestro Vi√±edo
        </h1>
        <p class="text-xl text-sage max-w-3xl mx-auto leading-relaxed">
          En el coraz√≥n del Valle de Guadalupe, nuestras vides crecen en un terru√±o √∫nico que combina suelos calc√°reos, influencia costera y dedicaci√≥n familiar para crear vinos que expresan aut√©nticamente su origen.
        </p>
      </div>
    </div>
  </section>
  
  <!-- Terroir Grid -->
  <section class="py-20 bg-crema">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16 reveal">
        <h2 class="text-4xl md:text-5xl font-display font-light text-charcoal mb-4">
          Nuestro Terru√±o
        </h2>
        <p class="text-xl text-sage max-w-2xl mx-auto">
          Los elementos que dan vida a nuestros vinos
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {terroirCards.map((card, index) => (
          <div class="text-center reveal" style={`animation-delay: ${index * 0.1}s;`}>
            <div class="w-20 h-20 bg-stone rounded-full flex items-center justify-center mx-auto mb-6 text-3xl">
              {card.icon}
            </div>
            <h3 class="text-xl font-display font-semibold text-charcoal mb-3">
              {card.title}
            </h3>
            <p class="text-sage leading-relaxed">
              {card.description}
            </p>
          </div>
        ))}
      </div>
    </div>
  </section>
  
  <!-- Practices Accordion -->
  <section class="py-32 bg-crema border-y border-warm-sand/20">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-24 reveal">
        <span class="inline-block text-clay tracking-[0.3em] uppercase text-xs font-semibold mb-4">Filosof√≠a de Trabajo</span>
        <h2 class="text-5xl md:text-6xl font-display font-light text-charcoal mb-6">
          Nuestras Pr√°cticas
        </h2>
        <div class="w-24 h-px bg-warm-sand mx-auto"></div>
      </div>
      
      <div class="space-y-6" x-data="{ active: null }">
        {practices.map((practice, index) => (
          <div class="reveal border-b border-warm-sand/30" style={`animation-delay: ${index * 0.1}s;`}>
            <button
              @click="active = active === {index} ? null : {index}"
              class="w-full text-left py-8 flex items-center justify-between group focus:outline-none"
            >
              <h3 class="text-2xl font-display font-light text-charcoal group-hover:text-clay transition-colors duration-300">
                {practice.title}
              </h3>
              <div class="relative w-6 h-6">
                <span class="absolute top-1/2 left-0 w-full h-px bg-clay transition-transform duration-500" :class="active === {index} ? 'rotate-0' : 'rotate-90'"></span>
                <span class="absolute top-1/2 left-0 w-full h-px bg-clay"></span>
              </div>
            </button>
            
            <div 
              x-show="active === {index}"
              x-collapse
              class="pb-8"
            >
              <p class="text-sage leading-relaxed font-light text-lg max-w-2xl">
                {practice.description}
              </p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>
  
  <!-- Gallery -->
  <section class="py-32 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-24 reveal">
        <span class="inline-block text-clay tracking-[0.3em] uppercase text-xs font-semibold mb-4">Momentos en el Terru√±o</span>
        <h2 class="text-5xl md:text-6xl font-display font-light text-charcoal mb-6">
          Galer√≠a del Vi√±edo
        </h2>
        <div class="w-24 h-px bg-warm-sand mx-auto"></div>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {galleryImages.map((image, index) => (
          <div class="reveal group relative overflow-hidden aspect-[4/5] lg:aspect-square shadow-lg" style={`animation-delay: ${index * 0.1}s;`}>
            <img 
              src={image} 
              alt={`Vista del vi√±edo ${index + 1}`}
              class="w-full h-full object-cover transform transition-transform duration-1000 group-hover:scale-110 cursor-pointer"
              loading="lazy"
              onclick="openLightbox(this.src)"
            />
            <div class="absolute inset-0 bg-charcoal/20 group-hover:bg-charcoal/40 transition-colors duration-500 flex items-center justify-center opacity-0 group-hover:opacity-100">
              <span class="text-crema text-[0.6rem] tracking-[0.4em] uppercase border border-crema/30 px-6 py-3 backdrop-blur-sm">Ampliar</span>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>
  
  <!-- CTA Section -->
  <section class="py-32 bg-stone text-crema relative overflow-hidden">
    <div class="absolute inset-0 opacity-20 bg-[url('/images/hero-vineyard.jpg')] bg-cover bg-fixed"></div>
    <div class="absolute inset-0 bg-clay/80 mix-blend-multiply"></div>
    
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
      <div class="reveal">
        <h2 class="text-5xl md:text-7xl font-display font-light mb-8 leading-tight">
          Siente el Pulso de la Tierra
        </h2>
        <p class="text-xl md:text-2xl mb-12 text-crema/90 font-light max-w-2xl mx-auto">
          Descubre de primera mano c√≥mo cultivamos nuestras vides y elaboramos nuestros vinos con respeto absoluto por el terru√±o.
        </p>
        <a href="/reservaciones" class="group relative inline-flex items-center justify-center px-12 py-5 bg-crema text-clay font-body text-xs tracking-[0.3em] uppercase transition-all duration-500 overflow-hidden">
          <span class="relative z-10">Planear tu Visita</span>
          <div class="absolute inset-0 bg-warm-sand transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"></div>
        </a>
      </div>
    </div>
  </section>
</Layout>

<script>
  function openLightbox(src) {
    // Simple lightbox implementation
    const lightbox = document.createElement('div');
    lightbox.className = 'fixed inset-0 bg-charcoal/90 z-50 flex items-center justify-center p-4';
    lightbox.innerHTML = `
      <div class="relative max-w-4xl max-h-full">
        <img src="${src}" alt="Vineyard image" class="max-w-full max-h-full object-contain rounded-lg">
        <button onclick="this.closest('.fixed').remove()" class="absolute top-4 right-4 text-white hover:text-warm-sand">
          <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
    `;
    
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) {
        lightbox.remove();
      }
    });
    
    document.body.appendChild(lightbox);
  }
</script>